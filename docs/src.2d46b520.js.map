{"version":3,"sources":["src/emoji.struct.js","src/view.js","src/index.js"],"names":["emojis","money","String","fromCodePoint","poop","View","rootElementID","app","document","getElementById","door1","querySelector","door2","door3","winsText","losesText","ratio","doorsArray","innerHTML","nextElementSibling","style","animation","num","doorNum","door","filter","innerText","Game","DOMElement","mode","doors","wins","loses","numOfGamesPlayed","alwaysSwitch","firstDoorSelected","doorShown","finalDoorSelected","prizeArray","view","setDoorPrizes","render","selectFirstDoor","window","safeToStart","closeAllDoors","_shufflePrizes","slice","currentIndex","temporaryValue","randomIndex","length","Math","floor","random","highlightSelectedDoor","selectSecondDoor","i","openDoor","setTimeout","switchDoors","keepSelectedDoor","unhighlightAllDoors","doorOptions","splice","indexOf","checkWin","win","lose","updateWins","calculateWinRatio","resetGame","updateLoses","updateRatio","toFixed","onload","addEventListener","gameAlwaysSwitch","gameNeverSwitch","init","alert","startGames"],"mappings":"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","file":"src.2d46b520.js","sourceRoot":"..","sourcesContent":["const emojis = {\n    money: String.fromCodePoint(0x1F4b0),\n    poop: String.fromCodePoint(0x1F4a9)\n}\n\nexport default emojis;","export class View {\n    constructor(rootElementID){\n        this.app = document.getElementById(rootElementID);\n        \n        this.door1 = this.app.querySelector('.prize-one');\n        this.door2 = this.app.querySelector('.prize-two');\n        this.door3 = this.app.querySelector('.prize-three');\n        this.winsText = this.app.querySelector('#wins');\n        this.losesText = this.app.querySelector('#loses');\n        this.ratio = this.app.querySelector('#ratio');\n    }\n\n    render(doorsArray){\n        this.door1.innerHTML = doorsArray[0];\n        this.door2.innerHTML = doorsArray[1];\n        this.door3.innerHTML = doorsArray[2];\n    }\n\n    closeAllDoors(){\n        this.door1.nextElementSibling.style.animation = 'closeDoor 300ms forwards';\n        this.door2.nextElementSibling.style.animation = 'closeDoor 300ms forwards';\n        this.door3.nextElementSibling.style.animation = 'closeDoor 300ms forwards';\n    }\n\n    openDoor(num){\n        const doorNum = `door${num+1}`;\n        this[doorNum].nextElementSibling.style.animation = 'openDoor 300ms forwards';\n    }\n\n    closeDoor(num){\n        const doorNum = `door${num+1}`;\n        this[doorNum].nextElementSibling.style.animation = 'closeDoor 300ms forwards';\n    }\n\n    highlightSelectedDoor(door){\n        this[`door${door + 1}`].nextElementSibling.style.filter = 'hue-rotate(45deg)';\n    }\n\n    unhighlightAllDoors(){\n        this.door1.nextElementSibling.style.filter = 'hue-rotate(0deg)';\n        this.door2.nextElementSibling.style.filter = 'hue-rotate(0deg)';\n        this.door3.nextElementSibling.style.filter = 'hue-rotate(0deg)';\n    }\n\n    updateWins(num){\n        this.winsText.innerText = num;\n    }\n\n    updateLoses(num){\n        this.losesText.innerText = num;\n    }\n\n    updateRatio(ratio){\n        this.ratio.innerText = ratio;\n    }\n\n}","import './main.css';\nimport emojis from './emoji.struct';\nimport { View } from './view';\n\nclass Game{\n    // DOMElement is parent node of game HTML\n    // Mode is set to true to always switch doors, false to always keep selected door\n    constructor(DOMElement, mode){\n        this.doors = [];\n        this.wins = 0;\n        this.loses = 0;\n        this.numOfGamesPlayed = 0;\n        this.alwaysSwitch = mode;\n        \n        this.firstDoorSelected = null;\n        this.doorShown = null;\n        this.finalDoorSelected = null;\n        \n        this.prizeArray = [emojis.poop, emojis.poop, emojis.money];\n        this.view = new View(DOMElement);\n    }\n\n    init(){\n        this.setDoorPrizes();\n        this.view.render(this.doors);\n        this.selectFirstDoor();\n        window.safeToStart = false;\n    }\n\n    setDoorPrizes(){\n        this.view.closeAllDoors();\n        this.doors = this._shufflePrizes(this.prizeArray.slice());\n    }\n\n    _shufflePrizes(prizeArray){\n        var currentIndex = prizeArray.length;\n\t    var temporaryValue, randomIndex;\n\n        // While there remain elements to shuffle...\n        while (0 !== currentIndex) {\n            // Pick a remaining element...\n            randomIndex = Math.floor(Math.random() * currentIndex);\n            currentIndex -= 1;\n\n            // And swap it with the current element.\n            temporaryValue = prizeArray[currentIndex];\n            prizeArray[currentIndex] = prizeArray[randomIndex];\n            prizeArray[randomIndex] = temporaryValue;\n        }\n    return prizeArray;\n    }\n\n    // Game Play\n    selectFirstDoor(){\n        let randomIndex = Math.floor(Math.random() * this.doors.length);\n\n        this.firstDoorSelected = randomIndex;\n        this.view.highlightSelectedDoor(randomIndex);\n        this.selectSecondDoor();\n    }\n\n    selectSecondDoor(){\n        for(let i = 0; i < this.doors.length; i++){\n            if(i !== this.firstDoorSelected && this.doors[i] !== emojis.money){\n                this.view.openDoor(i)\n                this.doorShown = i;\n                setTimeout(() => {\n                    if(this.alwaysSwitch){\n                        this.switchDoors();\n                    } else {\n                        this.keepSelectedDoor();\n                    }\n                    \n                },1000);\n                return;\n            }\n        }\n    }\n\n    switchDoors(){\n        this.view.unhighlightAllDoors();\n        let doorOptions = [0,1,2];\n        doorOptions.splice(doorOptions.indexOf(this.firstDoorSelected),1);\n        doorOptions.splice(doorOptions.indexOf(this.doorShown),1);\n        this.finalDoorSelected = doorOptions[0];\n        this.view.highlightSelectedDoor(this.finalDoorSelected);\n\n        this.view.openDoor(this.finalDoorSelected);\n        setTimeout(() => {\n            this.checkWin();\n        },500);\n    }\n\n    keepSelectedDoor(){\n        this.finalDoorSelected = this.firstDoorSelected;\n        this.view.openDoor(this.finalDoorSelected);\n        setTimeout(() => {\n            this.checkWin();\n        },500);\n    }\n\n    checkWin(){\n        if(this.doors[this.finalDoorSelected] === emojis.money){\n            this.win();\n        }\n        else {\n            this.lose();\n        }\n    }\n\n    win(){\n        this.wins++;\n        this.view.updateWins(this.wins);\n        this.calculateWinRatio();\n        setTimeout(() => {\n            this.resetGame();\n        }, 600);\n    }\n\n    lose(){\n        this.loses++;\n        this.view.updateLoses(this.loses);\n        this.calculateWinRatio();\n        setTimeout(() => {\n            this.resetGame();\n        }, 600)\n    }\n\n    calculateWinRatio(){\n        let ratio = (this.wins / (this.wins + this.loses)) * 100;\n        this.view.updateRatio(ratio.toFixed(2));\n    }\n\n    resetGame(){\n        this.numOfGamesPlayed++;\n        this.view.unhighlightAllDoors();\n        this.firstDoorSelected = null;\n        this.finalDoorSelected = null;\n        this.doorShown = null;\n        this.setDoorPrizes();\n        this.view.render(this.doors);\n        if(this.numOfGamesPlayed < 100){\n            setTimeout(() => {\n                this.selectFirstDoor();\n            },500);\n        } else {\n            this.doors = [];\n            this.wins = 0;\n            this.loses = 0;\n            this.numOfGamesPlayed = 0;\n            window.safeToStart = true;\n        }\n    }\n}\n\n\nwindow.onload = function(){\n    window.safeToStart = true;\n    const startGames = () =>{\n        if(safeToStart){\n            const gameAlwaysSwitch= new Game('game-always-switch', true);\n            const gameNeverSwitch= new Game('game-never-switch', false);\n            gameAlwaysSwitch.init();    \n            gameNeverSwitch.init(); \n        }\n        else {\n            alert('Game must finish before restarting.');\n        }\n    }\n\n    const btnStart = document.getElementById('start');\n    btnStart.addEventListener('click', () => {\n        startGames();\n    })\n}"]}